import{A as d,u as p,r as x,k as n,j as e}from"./index-B58A1AXN.js";import{u as f,C as l,T as m}from"./index.esm-Cr_uW7ya.js";import{u as h,T as S,B as j,a as v}from"./List-Clpb0GIO.js";const E=()=>h(d.login,{onError:t=>console.log(t)}),y=()=>{document.title="Dog Lover - Login";const t=p(),{mutate:u,isLoading:o,isSuccess:g}=E(),{control:i,handleSubmit:c,formState:{errors:s}}=f({defaultValues:{name:"",email:""}});return x.useEffect(()=>{localStorage.length&&n.success("Session terminated",{position:"top-right"}),localStorage.clear()},[]),e.jsxs("form",{onSubmit:c(r=>u(r,{onSuccess:()=>{localStorage.setItem("userName",r.name),localStorage.setItem("userEmail",r.email),localStorage.setItem("userFavorites",JSON.stringify([])),t("/")},onError:()=>{n.error("Something went wrong",{position:"top-right"})}})),children:[e.jsx(S,{variant:"h1",children:"Login"}),e.jsxs(j,{display:"flex",flexDirection:"column",gap:2,children:[e.jsx(l,{control:i,name:"name",rules:{required:{value:!0,message:"Name is required"}},render:({field:r})=>{var a;return e.jsx(m,{error:!!s.name,helperText:(a=s.name)==null?void 0:a.message,label:"Name",...r})}}),e.jsx(l,{control:i,name:"email",rules:{required:{value:!0,message:"Email is required"},pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Invalid email"}},render:({field:r})=>{var a;return e.jsx(m,{error:!!s.email,helperText:(a=s.email)==null?void 0:a.message,label:"Email",...r})}}),e.jsx(v,{disabled:o||g,variant:"contained",type:"submit",children:o?"Logging in":"Log in"})]})]})};export{y as default};
